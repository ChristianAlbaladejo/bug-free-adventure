!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{wP4z:function(n,o,r){"use strict";r.r(o),r.d(o,"FavoritesPageModule",(function(){return L}));var i=r("ofXK"),a=r("3Pt+"),c=r("TEn/"),l=r("tyNb"),u=r("mrSG"),s=r("S3Px"),d=r("knE8"),m=r("AytR"),p=r("tk/3"),f=r("fXoL");function g(e,t){if(1&e){var n=f["\u0275\u0275getCurrentView"]();f["\u0275\u0275elementStart"](0,"ion-icon",7),f["\u0275\u0275listener"]("click",(function(){return f["\u0275\u0275restoreView"](n),f["\u0275\u0275nextContext"]().gotoLogin()})),f["\u0275\u0275elementEnd"]()}}function v(e,t){if(1&e&&(f["\u0275\u0275elementStart"](0,"ion-badge",8),f["\u0275\u0275text"](1),f["\u0275\u0275elementEnd"]()),2&e){var n=f["\u0275\u0275nextContext"]();f["\u0275\u0275advance"](1),f["\u0275\u0275textInterpolate1"]("",null==n.cart?null:n.cart.length," ")}}function h(e,t){1&e&&f["\u0275\u0275element"](0,"img",16)}function k(e,t){if(1&e&&f["\u0275\u0275element"](0,"img",17),2&e){var n=f["\u0275\u0275nextContext"]().$implicit;f["\u0275\u0275propertyInterpolate"]("src",n.image,f["\u0275\u0275sanitizeUrl"])}}function x(e,t){if(1&e){var n=f["\u0275\u0275getCurrentView"]();f["\u0275\u0275elementStart"](0,"ion-icon",20),f["\u0275\u0275listener"]("click",(function(){f["\u0275\u0275restoreView"](n);var e=f["\u0275\u0275nextContext"](2).$implicit;return f["\u0275\u0275nextContext"]().addFav(e)})),f["\u0275\u0275elementEnd"]()}}function I(e,t){if(1&e){var n=f["\u0275\u0275getCurrentView"]();f["\u0275\u0275elementStart"](0,"ion-icon",21),f["\u0275\u0275listener"]("click",(function(){f["\u0275\u0275restoreView"](n);var e=f["\u0275\u0275nextContext"](2).$implicit;return f["\u0275\u0275nextContext"]().deleteFav(e)})),f["\u0275\u0275elementEnd"]()}}function y(e,t){if(1&e&&(f["\u0275\u0275elementStart"](0,"div"),f["\u0275\u0275template"](1,x,1,0,"ion-icon",18),f["\u0275\u0275template"](2,I,1,0,"ion-icon",19),f["\u0275\u0275elementEnd"]()),2&e){var n=f["\u0275\u0275nextContext"]().$implicit,o=f["\u0275\u0275nextContext"]();f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",!o.checkFav(n)),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",o.checkFav(n))}}function S(e,t){if(1&e){var n=f["\u0275\u0275getCurrentView"]();f["\u0275\u0275elementStart"](0,"ion-card"),f["\u0275\u0275elementStart"](1,"ion-row"),f["\u0275\u0275elementStart"](2,"ion-col"),f["\u0275\u0275template"](3,h,1,0,"img",9),f["\u0275\u0275template"](4,k,1,1,"img",10),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](5,"ion-col",11),f["\u0275\u0275elementStart"](6,"h4"),f["\u0275\u0275elementStart"](7,"ion-card-title"),f["\u0275\u0275text"](8),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](9,"ion-card-subtitle"),f["\u0275\u0275text"](10),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](11,"ion-row"),f["\u0275\u0275element"](12,"ion-col"),f["\u0275\u0275elementStart"](13,"ion-col",12),f["\u0275\u0275elementStart"](14,"ion-button",13),f["\u0275\u0275listener"]("click",(function(){f["\u0275\u0275restoreView"](n);var e=t.$implicit;return f["\u0275\u0275nextContext"]().loadProduct(e)})),f["\u0275\u0275text"](15,"Ver mas"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](16,"ion-col",14),f["\u0275\u0275template"](17,y,3,2,"div",15),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"]()}if(2&e){var o=t.$implicit,r=f["\u0275\u0275nextContext"]();f["\u0275\u0275advance"](3),f["\u0275\u0275property"]("ngIf",!o.image),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",o.image),f["\u0275\u0275advance"](4),f["\u0275\u0275textInterpolate"](o.name),f["\u0275\u0275advance"](2),f["\u0275\u0275textInterpolate"](o.description),f["\u0275\u0275advance"](7),f["\u0275\u0275property"]("ngIf",r.productLike)}}var C,b,w,E=[{path:"",component:(C=function(){function n(t,o,r,i){e(this,n),this._productsService=t,this.navCtrl=o,this.modalController=r,this.http=i,this.cart=[],this.product=[]}var o,r,i;return o=n,(r=[{key:"ngOnInit",value:function(){var e=this;this.user=localStorage.getItem("identity"),this.user=JSON.parse(this.user);var t=localStorage.getItem("cart");t=JSON.parse(t);for(var n=0;n<t.length;n++)this.cart.push(t[n]);this._productsService.getFav(this.user[0].id).subscribe((function(t){e.product=t,e.product.forEach((function(e){e.name=decodeURIComponent(e.name)})),e.productLike=t,e.productLike.forEach((function(e){e.name=decodeURIComponent(e.name)}))}))}},{key:"gotoLogin",value:function(){this.navCtrl.navigateForward("/login")}},{key:"gotoCart",value:function(){this.navCtrl.navigateForward("/cart")}},{key:"loadProduct",value:function(e){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,o=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.modalController.create({component:d.a,swipeToClose:!0,componentProps:{product:e}});case 2:return(n=t.sent).onDidDismiss().then((function(e){o.ngOnInit()})),t.next=6,n.present();case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t,this)})))}},{key:"ifLogin",value:function(){return null==JSON.parse(localStorage.getItem("identity"))}},{key:"checkFav",value:function(e){for(var t=0;t<this.productLike.length;t++)if(e.id==this.productLike[t].productId)return!0;return!1}},{key:"addFav",value:function(e){this.productLike.push({productId:e.id,userId:this.user[0].id});var t={productId:e.id,userId:this.user[0].id},n=new p.c({"Content-Type":"application/json",Authorization:localStorage.getItem("token")});this.http.post(m.a.APIURL+"/addFavorite/",t,{headers:n}).subscribe((function(e){}),(function(e){console.log(e)}))}},{key:"deleteFav",value:function(e){for(var t=0;t<this.productLike.length;t++)e.id==this.productLike[t].productId&&this.productLike.splice(t,1);this._productsService.deleteFav(e.id,this.user[0].id).subscribe((function(e){}),(function(e){console.log(e)}))}}])&&t(o.prototype,r),i&&t(o,i),n}(),C.\u0275fac=function(e){return new(e||C)(f["\u0275\u0275directiveInject"](s.a),f["\u0275\u0275directiveInject"](c.Q),f["\u0275\u0275directiveInject"](c.P),f["\u0275\u0275directiveInject"](p.a))},C.\u0275cmp=f["\u0275\u0275defineComponent"]({type:C,selectors:[["app-favorites"]],features:[f["\u0275\u0275ProvidersFeature"]([s.a])],decls:13,vars:4,consts:[[3,"translucent"],["slot","start"],["slot","end",3,"click"],["slot","end","name","person-outline",3,"click",4,"ngIf"],["slot","icon-only","name","cart-outline"],["color","danger","style","position: absolute; right: -4px; top: -2px;",4,"ngIf"],[4,"ngFor","ngForOf"],["slot","end","name","person-outline",3,"click"],["color","danger",2,"position","absolute","right","-4px","top","-2px"],["src","../../../assets/mug.jpg",4,"ngIf"],[3,"src",4,"ngIf"],["size","9"],[1,"center"],[3,"click"],[1,"heart"],[4,"ngIf"],["src","../../../assets/mug.jpg"],[3,"src"],["name","heart-outline",3,"click",4,"ngIf"],["color","danger","name","heart",3,"click",4,"ngIf"],["name","heart-outline",3,"click"],["color","danger","name","heart",3,"click"]],template:function(e,t){1&e&&(f["\u0275\u0275elementStart"](0,"ion-header",0),f["\u0275\u0275elementStart"](1,"ion-toolbar"),f["\u0275\u0275elementStart"](2,"ion-buttons",1),f["\u0275\u0275element"](3,"ion-menu-button"),f["\u0275\u0275element"](4,"ion-back-button"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](5,"ion-title"),f["\u0275\u0275text"](6,"Favoritos"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](7,"ion-buttons",2),f["\u0275\u0275listener"]("click",(function(){return t.gotoCart()})),f["\u0275\u0275template"](8,g,1,0,"ion-icon",3),f["\u0275\u0275element"](9,"ion-icon",4),f["\u0275\u0275template"](10,v,2,1,"ion-badge",5),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](11,"ion-content"),f["\u0275\u0275template"](12,S,18,5,"ion-card",6),f["\u0275\u0275elementEnd"]()),2&e&&(f["\u0275\u0275property"]("translucent",!0),f["\u0275\u0275advance"](8),f["\u0275\u0275property"]("ngIf",t.ifLogin()),f["\u0275\u0275advance"](2),f["\u0275\u0275property"]("ngIf",t.cart),f["\u0275\u0275advance"](2),f["\u0275\u0275property"]("ngForOf",t.product))},directives:[c.r,c.L,c.h,c.z,c.d,c.e,c.K,i.k,c.s,c.o,i.j,c.f,c.i,c.G,c.n,c.m,c.l,c.g],styles:["ion-icon[_ngcontent-%COMP%]{zoom:1.2}.heart[_ngcontent-%COMP%]{text-align:center;zoom:2}img[_ngcontent-%COMP%]{border-radius:5%;margin-top:3rem}"]}),C)}],F=((w=function t(){e(this,t)}).\u0275mod=f["\u0275\u0275defineNgModule"]({type:w}),w.\u0275inj=f["\u0275\u0275defineInjector"]({factory:function(e){return new(e||w)},imports:[[l.i.forChild(E)],l.i]}),w),L=((b=function t(){e(this,t)}).\u0275mod=f["\u0275\u0275defineNgModule"]({type:b}),b.\u0275inj=f["\u0275\u0275defineInjector"]({factory:function(e){return new(e||b)},imports:[[i.b,a.a,c.M,F]]}),b)}}])}();