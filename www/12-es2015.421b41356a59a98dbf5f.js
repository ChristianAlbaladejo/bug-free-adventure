(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{"2+2i":function(t,e,n){"use strict";n.r(e),n.d(e,"CartPageModule",(function(){return f}));var o=n("ofXK"),i=n("3Pt+"),r=n("TEn/"),c=n("tyNb"),l=n("fXoL"),a=n("tk/3");function s(t,e){if(1&t){const t=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"ion-item",5),l["\u0275\u0275elementStart"](1,"ion-row"),l["\u0275\u0275elementStart"](2,"ion-col",6),l["\u0275\u0275elementStart"](3,"ion-label"),l["\u0275\u0275elementStart"](4,"h2",7),l["\u0275\u0275text"](5),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](6,"p"),l["\u0275\u0275text"](7),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](8,"ion-col"),l["\u0275\u0275elementStart"](9,"ion-item",8),l["\u0275\u0275elementStart"](10,"ion-icon",9),l["\u0275\u0275listener"]("click",(function(){l["\u0275\u0275restoreView"](t);const n=e.index;return l["\u0275\u0275nextContext"](2).decrementQty(n)})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](11,"ion-input",10),l["\u0275\u0275listener"]("ngModelChange",(function(n){return l["\u0275\u0275restoreView"](t),e.$implicit.quantity=n})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](12,"ion-icon",11),l["\u0275\u0275listener"]("click",(function(){l["\u0275\u0275restoreView"](t);const n=e.index;return l["\u0275\u0275nextContext"](2).incrementQty(n)})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](13,"ion-button",12),l["\u0275\u0275listener"]("click",(function(){l["\u0275\u0275restoreView"](t);const n=e.$implicit;return l["\u0275\u0275nextContext"](2).deleteProduct(n)})),l["\u0275\u0275element"](14,"ion-icon",13),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()}if(2&t){const t=e.$implicit;l["\u0275\u0275advance"](5),l["\u0275\u0275textInterpolate"](t.name),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate1"]("",t.costPrice," \u20ac"),l["\u0275\u0275advance"](4),l["\u0275\u0275property"]("value",t.quantity)("ngModel",t.quantity)}}function d(t,e){1&t&&(l["\u0275\u0275elementStart"](0,"div",14),l["\u0275\u0275element"](1,"ion-icon",15),l["\u0275\u0275elementStart"](2,"h3"),l["\u0275\u0275text"](3,"Presiona el bot\xf3n de abajo para seguir comprando"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](4,"ion-button",16),l["\u0275\u0275text"](5,"M\xe1s productos"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]())}function m(t,e){if(1&t&&(l["\u0275\u0275elementStart"](0,"ion-content"),l["\u0275\u0275elementStart"](1,"div"),l["\u0275\u0275elementStart"](2,"ion-list"),l["\u0275\u0275template"](3,s,15,4,"ion-item",3),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275template"](4,d,6,0,"div",4),l["\u0275\u0275elementEnd"]()),2&t){const t=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("ngForOf",t.products),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",null==t.products.length||0==t.products.length)}}const p=function(t){return{total:t}};function u(t,e){if(1&t){const t=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"ion-footer"),l["\u0275\u0275elementStart"](1,"ion-list",17),l["\u0275\u0275elementStart"](2,"ion-item",18),l["\u0275\u0275elementStart"](3,"ion-label",19),l["\u0275\u0275elementStart"](4,"strong"),l["\u0275\u0275text"](5,"Total: "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](6,"span"),l["\u0275\u0275text"](7),l["\u0275\u0275pipe"](8,"number"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](9,"ion-button",20),l["\u0275\u0275listener"]("click",(function(){return l["\u0275\u0275restoreView"](t),l["\u0275\u0275nextContext"]().purchase()})),l["\u0275\u0275element"](10,"ion-icon",21),l["\u0275\u0275text"](11," Comprar "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()}if(2&t){const t=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](7),l["\u0275\u0275textInterpolate1"]("",l["\u0275\u0275pipeBind2"](8,2,t.finalValue,"1.2")," \u20ac"),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("state",l["\u0275\u0275pureFunction1"](5,p,t.finalValue))}}const h=[{path:"",component:(()=>{class t{constructor(t,e){this.navCtrl=t,this.http=e,this.products=[],this.total=0,this.family=[],this.footerIsHidden=!0}ngOnInit(){this.load()}ifLogin(){return null==JSON.parse(localStorage.getItem("identity"))}load(){this.footerIsHidden=!0,this.user=localStorage.getItem("identity"),this.user=JSON.parse(this.user);let t="",e=localStorage.getItem("cart");if(2!=e.length){this.products=JSON.parse(e),console.log(this.products);for(let e=0;e<this.products.length;e++){var n=this.products[e].costPrice*this.products[e].quantity;this.products[e].name=decodeURIComponent(this.products[e].name),this.family.forEach(n=>{n.id==this.products[e].familyId&&(t=n.name)}),this.products[e].familyName=t,this.total=n+this.total}this.shippingType||(this.shipping=this.total>30?0:5),console.log(this.products),this.footerIsHidden=!1}}incrementQty(t){this.products[t].quantity+=1}decrementQty(t){this.products[t].quantity>1&&(this.products[t].quantity-=1)}get finalValue(){return this.products.reduce((t,e)=>t+e.quantity*e.costPrice,0)}deleteProduct(t){for(let e=0;e<this.products.length;e++)t.id==this.products[e].id&&this.products.splice(e,1);this.total=0;for(let e=0;e<this.products.length;e++)this.total=this.products[e].costPrice*this.products[e].quantity+this.total;this.total+=5,localStorage.setItem("cart",JSON.stringify(this.products)),this.load()}purchase(){this.buy()}ionViewWillLoad(){this.load()}loadStripe(){if(!window.document.getElementById("stripe-script")){var t=window.document.createElement("script");t.id="stripe-script",t.type="text/javascript",t.src="https://checkout.stripe.com/checkout.js",window.document.body.appendChild(t)}}buy(){}}return t.\u0275fac=function(e){return new(e||t)(l["\u0275\u0275directiveInject"](r.Q),l["\u0275\u0275directiveInject"](a.a))},t.\u0275cmp=l["\u0275\u0275defineComponent"]({type:t,selectors:[["app-cart"]],decls:9,vars:3,consts:[[3,"translucent"],["slot","start"],[4,"ngIf"],["class","lista",4,"ngFor","ngForOf"],["class","center",4,"ngIf"],[1,"lista"],["size","5"],["text-wrap",""],["lines","none",1,"picker"],["color","success","name","remove-circle","item-right","",3,"click"],["type","number","min","1","disabled","",1,"number",3,"value","ngModel","ngModelChange"],["color","danger","name","add-circle","item-right","",3,"click"],["item-end","","color","danger",1,"trash",3,"click"],["name","trash-outline"],[1,"center"],["name","cart",1,"cart"],["routerLink","/home"],["no-margin",""],["no-padding",""],["padding-left",""],["item-end","","color","danger","routerLink","/purchase-payment","icon-left","",3,"state","click"],["name","cart"]],template:function(t,e){1&t&&(l["\u0275\u0275elementStart"](0,"ion-header",0),l["\u0275\u0275elementStart"](1,"ion-toolbar"),l["\u0275\u0275elementStart"](2,"ion-buttons",1),l["\u0275\u0275element"](3,"ion-menu-button"),l["\u0275\u0275element"](4,"ion-back-button"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](5,"ion-title"),l["\u0275\u0275text"](6,"Carrito"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275template"](7,m,5,2,"ion-content",2),l["\u0275\u0275template"](8,u,12,7,"ion-footer",2)),2&t&&(l["\u0275\u0275property"]("translucent",!0),l["\u0275\u0275advance"](7),l["\u0275\u0275property"]("ngIf",e.products),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",!e.footerIsHidden))},directives:[r.r,r.L,r.h,r.z,r.d,r.e,r.K,o.k,r.o,r.w,o.j,r.u,r.G,r.n,r.v,r.s,r.t,r.R,i.d,i.g,r.g,r.U,c.h,r.q],pipes:[o.e],styles:[".picker[_ngcontent-%COMP%]{margin-top:.5rem;border:none;pointer-events:auto}.trash[_ngcontent-%COMP%]{margin-top:1.1rem}.picker[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{zoom:1.3}.number[_ngcontent-%COMP%]{--opacity:1!important}.center[_ngcontent-%COMP%]{text-align:center;margin-top:6rem}.cart[_ngcontent-%COMP%]{color:#c7c7c7;zoom:6}"]}),t})()}];let g=(()=>{class t{}return t.\u0275mod=l["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=l["\u0275\u0275defineInjector"]({factory:function(e){return new(e||t)},imports:[[c.i.forChild(h)],c.i]}),t})(),f=(()=>{class t{}return t.\u0275mod=l["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=l["\u0275\u0275defineInjector"]({factory:function(e){return new(e||t)},imports:[[o.b,i.a,r.M,g]]}),t})()}}]);