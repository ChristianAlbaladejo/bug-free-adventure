(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{wP4z:function(e,t,n){"use strict";n.r(t),n.d(t,"FavoritesPageModule",(function(){return E}));var o=n("ofXK"),i=n("3Pt+"),r=n("TEn/"),c=n("tyNb"),a=n("mrSG"),l=n("S3Px"),s=n("knE8"),d=n("AytR"),m=n("tk/3"),p=n("fXoL");function u(e,t){if(1&e){const e=p["\u0275\u0275getCurrentView"]();p["\u0275\u0275elementStart"](0,"ion-icon",7),p["\u0275\u0275listener"]("click",(function(){return p["\u0275\u0275restoreView"](e),p["\u0275\u0275nextContext"]().gotoLogin()})),p["\u0275\u0275elementEnd"]()}}function g(e,t){if(1&e&&(p["\u0275\u0275elementStart"](0,"ion-badge",8),p["\u0275\u0275text"](1),p["\u0275\u0275elementEnd"]()),2&e){const e=p["\u0275\u0275nextContext"]();p["\u0275\u0275advance"](1),p["\u0275\u0275textInterpolate1"]("",null==e.cart?null:e.cart.length," ")}}function f(e,t){1&e&&p["\u0275\u0275element"](0,"img",16)}function h(e,t){if(1&e&&p["\u0275\u0275element"](0,"img",17),2&e){const e=p["\u0275\u0275nextContext"]().$implicit;p["\u0275\u0275propertyInterpolate"]("src",e.image,p["\u0275\u0275sanitizeUrl"])}}function v(e,t){if(1&e){const e=p["\u0275\u0275getCurrentView"]();p["\u0275\u0275elementStart"](0,"ion-icon",20),p["\u0275\u0275listener"]("click",(function(){p["\u0275\u0275restoreView"](e);const t=p["\u0275\u0275nextContext"](2).$implicit;return p["\u0275\u0275nextContext"]().addFav(t)})),p["\u0275\u0275elementEnd"]()}}function I(e,t){if(1&e){const e=p["\u0275\u0275getCurrentView"]();p["\u0275\u0275elementStart"](0,"ion-icon",21),p["\u0275\u0275listener"]("click",(function(){p["\u0275\u0275restoreView"](e);const t=p["\u0275\u0275nextContext"](2).$implicit;return p["\u0275\u0275nextContext"]().deleteFav(t)})),p["\u0275\u0275elementEnd"]()}}function x(e,t){if(1&e&&(p["\u0275\u0275elementStart"](0,"div"),p["\u0275\u0275template"](1,v,1,0,"ion-icon",18),p["\u0275\u0275template"](2,I,1,0,"ion-icon",19),p["\u0275\u0275elementEnd"]()),2&e){const e=p["\u0275\u0275nextContext"]().$implicit,t=p["\u0275\u0275nextContext"]();p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("ngIf",!t.checkFav(e)),p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("ngIf",t.checkFav(e))}}function S(e,t){if(1&e){const e=p["\u0275\u0275getCurrentView"]();p["\u0275\u0275elementStart"](0,"ion-card"),p["\u0275\u0275elementStart"](1,"ion-row"),p["\u0275\u0275elementStart"](2,"ion-col"),p["\u0275\u0275template"](3,f,1,0,"img",9),p["\u0275\u0275template"](4,h,1,1,"img",10),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](5,"ion-col",11),p["\u0275\u0275elementStart"](6,"h4"),p["\u0275\u0275elementStart"](7,"ion-card-title"),p["\u0275\u0275text"](8),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](9,"ion-card-subtitle"),p["\u0275\u0275text"](10),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](11,"ion-row"),p["\u0275\u0275element"](12,"ion-col"),p["\u0275\u0275elementStart"](13,"ion-col",12),p["\u0275\u0275elementStart"](14,"ion-button",13),p["\u0275\u0275listener"]("click",(function(){p["\u0275\u0275restoreView"](e);const n=t.$implicit;return p["\u0275\u0275nextContext"]().loadProduct(n)})),p["\u0275\u0275text"](15,"Ver mas"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](16,"ion-col",14),p["\u0275\u0275template"](17,x,3,2,"div",15),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=p["\u0275\u0275nextContext"]();p["\u0275\u0275advance"](3),p["\u0275\u0275property"]("ngIf",!e.image),p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("ngIf",e.image),p["\u0275\u0275advance"](4),p["\u0275\u0275textInterpolate"](e.name),p["\u0275\u0275advance"](2),p["\u0275\u0275textInterpolate"](e.description),p["\u0275\u0275advance"](7),p["\u0275\u0275property"]("ngIf",n.productLike)}}const k=[{path:"",component:(()=>{class e{constructor(e,t,n,o){this._productsService=e,this.navCtrl=t,this.modalController=n,this.http=o,this.cart=[],this.product=[]}ngOnInit(){this.user=localStorage.getItem("identity"),this.user=JSON.parse(this.user);let e=localStorage.getItem("cart");e=JSON.parse(e);for(let t=0;t<e.length;t++)this.cart.push(e[t]);this._productsService.getFav(this.user[0].id).subscribe(e=>{this.product=e,this.product.forEach(e=>{e.name=decodeURIComponent(e.name)}),this.productLike=e,this.productLike.forEach(e=>{e.name=decodeURIComponent(e.name)})})}gotoLogin(){this.navCtrl.navigateForward("/login")}gotoCart(){this.navCtrl.navigateForward("/cart")}loadProduct(e){return Object(a.a)(this,void 0,void 0,(function*(){const t=yield this.modalController.create({component:s.a,swipeToClose:!0,componentProps:{product:e}});return t.onDidDismiss().then(e=>{this.ngOnInit()}),yield t.present()}))}ifLogin(){return null==JSON.parse(localStorage.getItem("identity"))}checkFav(e){for(let t=0;t<this.productLike.length;t++)if(e.id==this.productLike[t].productId)return!0;return!1}addFav(e){this.productLike.push({productId:e.id,userId:this.user[0].id});var t={productId:e.id,userId:this.user[0].id};let n=new m.c({"Content-Type":"application/json",Authorization:localStorage.getItem("token")});this.http.post(d.a.APIURL+"/addFavorite/",t,{headers:n}).subscribe(e=>{},e=>{console.log(e)})}deleteFav(e){for(let t=0;t<this.productLike.length;t++)e.id==this.productLike[t].productId&&this.productLike.splice(t,1);this._productsService.deleteFav(e.id,this.user[0].id).subscribe(e=>{},e=>{console.log(e)})}}return e.\u0275fac=function(t){return new(t||e)(p["\u0275\u0275directiveInject"](l.a),p["\u0275\u0275directiveInject"](r.Q),p["\u0275\u0275directiveInject"](r.P),p["\u0275\u0275directiveInject"](m.a))},e.\u0275cmp=p["\u0275\u0275defineComponent"]({type:e,selectors:[["app-favorites"]],features:[p["\u0275\u0275ProvidersFeature"]([l.a])],decls:13,vars:4,consts:[[3,"translucent"],["slot","start"],["slot","end",3,"click"],["slot","end","name","person-outline",3,"click",4,"ngIf"],["slot","icon-only","name","cart-outline"],["color","danger","style","position: absolute; right: -4px; top: -2px;",4,"ngIf"],[4,"ngFor","ngForOf"],["slot","end","name","person-outline",3,"click"],["color","danger",2,"position","absolute","right","-4px","top","-2px"],["src","../../../assets/mug.jpg",4,"ngIf"],[3,"src",4,"ngIf"],["size","9"],[1,"center"],[3,"click"],[1,"heart"],[4,"ngIf"],["src","../../../assets/mug.jpg"],[3,"src"],["name","heart-outline",3,"click",4,"ngIf"],["color","danger","name","heart",3,"click",4,"ngIf"],["name","heart-outline",3,"click"],["color","danger","name","heart",3,"click"]],template:function(e,t){1&e&&(p["\u0275\u0275elementStart"](0,"ion-header",0),p["\u0275\u0275elementStart"](1,"ion-toolbar"),p["\u0275\u0275elementStart"](2,"ion-buttons",1),p["\u0275\u0275element"](3,"ion-menu-button"),p["\u0275\u0275element"](4,"ion-back-button"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](5,"ion-title"),p["\u0275\u0275text"](6,"Favoritos"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](7,"ion-buttons",2),p["\u0275\u0275listener"]("click",(function(){return t.gotoCart()})),p["\u0275\u0275template"](8,u,1,0,"ion-icon",3),p["\u0275\u0275element"](9,"ion-icon",4),p["\u0275\u0275template"](10,g,2,1,"ion-badge",5),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](11,"ion-content"),p["\u0275\u0275template"](12,S,18,5,"ion-card",6),p["\u0275\u0275elementEnd"]()),2&e&&(p["\u0275\u0275property"]("translucent",!0),p["\u0275\u0275advance"](8),p["\u0275\u0275property"]("ngIf",t.ifLogin()),p["\u0275\u0275advance"](2),p["\u0275\u0275property"]("ngIf",t.cart),p["\u0275\u0275advance"](2),p["\u0275\u0275property"]("ngForOf",t.product))},directives:[r.r,r.L,r.h,r.z,r.d,r.e,r.K,o.k,r.s,r.o,o.j,r.f,r.i,r.G,r.n,r.m,r.l,r.g],styles:["ion-icon[_ngcontent-%COMP%]{zoom:1.2}.heart[_ngcontent-%COMP%]{text-align:center;zoom:2}img[_ngcontent-%COMP%]{border-radius:5%;margin-top:3rem}"]}),e})()}];let C=(()=>{class e{}return e.\u0275mod=p["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=p["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[c.i.forChild(k)],c.i]}),e})(),E=(()=>{class e{}return e.\u0275mod=p["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=p["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[o.b,i.a,r.M,C]]}),e})()}}]);