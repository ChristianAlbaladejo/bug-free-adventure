!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{klDL:function(n,r,o){"use strict";o.r(r),o.d(r,"HomePageModule",(function(){return M}));var i=o("ofXK"),a=o("3Pt+"),c=o("TEn/"),l=o("tyNb"),s=o("mrSG"),u=o("S3Px"),d=o("knE8"),m=o("AytR"),p=o("tk/3"),f=o("fXoL");function g(e,t){if(1&e){var n=f["\u0275\u0275getCurrentView"]();f["\u0275\u0275elementStart"](0,"ion-icon",9),f["\u0275\u0275listener"]("click",(function(){return f["\u0275\u0275restoreView"](n),f["\u0275\u0275nextContext"]().gotoLogin()})),f["\u0275\u0275elementEnd"]()}}function h(e,t){1&e&&f["\u0275\u0275element"](0,"img",15)}function v(e,t){if(1&e&&f["\u0275\u0275element"](0,"img",16),2&e){var n=f["\u0275\u0275nextContext"]().$implicit;f["\u0275\u0275propertyInterpolate"]("src",n.image,f["\u0275\u0275sanitizeUrl"])}}function C(e,t){if(1&e){var n=f["\u0275\u0275getCurrentView"]();f["\u0275\u0275elementStart"](0,"ion-card",11),f["\u0275\u0275listener"]("click",(function(){f["\u0275\u0275restoreView"](n);var e=t.$implicit;return f["\u0275\u0275nextContext"](2).goToFamili(e.name,e.id)})),f["\u0275\u0275template"](1,h,1,0,"img",12),f["\u0275\u0275template"](2,v,1,1,"img",13),f["\u0275\u0275elementStart"](3,"div",14),f["\u0275\u0275text"](4),f["\u0275\u0275pipe"](5,"uppercase"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"]()}if(2&e){var r=t.$implicit;f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf","null"==r.image),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf","null"!=r.image),f["\u0275\u0275advance"](2),f["\u0275\u0275textInterpolate"](f["\u0275\u0275pipeBind1"](5,3,r.name))}}function k(e,t){if(1&e&&(f["\u0275\u0275elementStart"](0,"div"),f["\u0275\u0275template"](1,C,6,5,"ion-card",10),f["\u0275\u0275elementEnd"]()),2&e){var n=f["\u0275\u0275nextContext"]();f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngForOf",n.familyes)}}function y(e,t){1&e&&f["\u0275\u0275element"](0,"img",24)}function x(e,t){if(1&e&&f["\u0275\u0275element"](0,"img",25),2&e){var n=f["\u0275\u0275nextContext"]().$implicit;f["\u0275\u0275propertyInterpolate"]("src",n.image,f["\u0275\u0275sanitizeUrl"])}}function I(e,t){if(1&e){var n=f["\u0275\u0275getCurrentView"]();f["\u0275\u0275elementStart"](0,"ion-icon",28),f["\u0275\u0275listener"]("click",(function(){f["\u0275\u0275restoreView"](n);var e=f["\u0275\u0275nextContext"](2).$implicit;return f["\u0275\u0275nextContext"](2).addFav(e)})),f["\u0275\u0275elementEnd"]()}}function S(e,t){if(1&e){var n=f["\u0275\u0275getCurrentView"]();f["\u0275\u0275elementStart"](0,"ion-icon",29),f["\u0275\u0275listener"]("click",(function(){f["\u0275\u0275restoreView"](n);var e=f["\u0275\u0275nextContext"](2).$implicit;return f["\u0275\u0275nextContext"](2).deleteFav(e)})),f["\u0275\u0275elementEnd"]()}}function b(e,t){if(1&e&&(f["\u0275\u0275elementStart"](0,"div"),f["\u0275\u0275template"](1,I,1,0,"ion-icon",26),f["\u0275\u0275template"](2,S,1,0,"ion-icon",27),f["\u0275\u0275elementEnd"]()),2&e){var n=f["\u0275\u0275nextContext"]().$implicit,r=f["\u0275\u0275nextContext"](2);f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",!r.checkFav(n)),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",r.checkFav(n))}}function w(e,t){if(1&e){var n=f["\u0275\u0275getCurrentView"]();f["\u0275\u0275elementStart"](0,"ion-card"),f["\u0275\u0275elementStart"](1,"ion-row"),f["\u0275\u0275elementStart"](2,"ion-col"),f["\u0275\u0275template"](3,y,1,0,"img",18),f["\u0275\u0275template"](4,x,1,1,"img",19),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](5,"ion-col",20),f["\u0275\u0275elementStart"](6,"h4"),f["\u0275\u0275elementStart"](7,"ion-card-title"),f["\u0275\u0275text"](8),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](9,"ion-row"),f["\u0275\u0275element"](10,"ion-col"),f["\u0275\u0275elementStart"](11,"ion-col",21),f["\u0275\u0275elementStart"](12,"ion-button",22),f["\u0275\u0275listener"]("click",(function(){f["\u0275\u0275restoreView"](n);var e=t.$implicit;return f["\u0275\u0275nextContext"](2).loadProduct(e)})),f["\u0275\u0275text"](13,"Ver mas"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](14,"ion-col",23),f["\u0275\u0275template"](15,b,3,2,"div",8),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"]()}if(2&e){var r=t.$implicit,o=f["\u0275\u0275nextContext"](2);f["\u0275\u0275advance"](3),f["\u0275\u0275property"]("ngIf",!r.image),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",r.image),f["\u0275\u0275advance"](4),f["\u0275\u0275textInterpolate"](r.name),f["\u0275\u0275advance"](7),f["\u0275\u0275property"]("ngIf",o.productLike)}}function E(e,t){if(1&e&&(f["\u0275\u0275elementStart"](0,"div"),f["\u0275\u0275template"](1,w,16,4,"ion-card",17),f["\u0275\u0275elementEnd"]()),2&e){var n=f["\u0275\u0275nextContext"]();f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngForOf",n.product)}}var O,F,P,j=[{path:"",component:(O=function(){function n(t,r,o,i,a,c,l){e(this,n),this._productsService=t,this.navCtrl=r,this.loadingController=o,this.alertController=i,this.toastController=a,this.modalController=c,this.http=l,this.cart=[],this.productLike=[],this.search="",this.currentNumber=0}var r,o,i;return r=n,(o=[{key:"ngOnInit",value:function(){this.products(),this.load()}},{key:"ionViewDidEnter",value:function(){this.products()}},{key:"load",value:function(){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadingController.create({message:"Cargando...",translucent:!0});case 2:return t=e.sent,e.next=5,t.present();case 5:this._productsService.getFamilies().subscribe((function(e){console.log(e),n.familyes=e,n.loadingController.dismiss()}),(function(e){return Object(s.a)(n,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.alertController.create({header:"Error!",message:"Parece que tenemos problemas \ud83e\udd74",buttons:[{text:"Okay",handler:function(){n.load()}}]});case 2:return t=e.sent,e.next=5,t.present();case 5:this.loadingController.dismiss();case 6:case"end":return e.stop()}}),e,this)})))}));case 6:case"end":return e.stop()}}),e,this)})))}},{key:"products",value:function(){localStorage.getItem("cart")||localStorage.setItem("cart",JSON.stringify({})),this.user=localStorage.getItem("identity"),this.user=JSON.parse(this.user);var e=localStorage.getItem("cart");e=JSON.parse(e),this.cart=[];for(var t=0;t<e.length;t++)this.cart.push(e[t])}},{key:"ifLogin",value:function(){return null==JSON.parse(localStorage.getItem("identity"))}},{key:"gotoLogin",value:function(){this.navCtrl.navigateForward("/login")}},{key:"goToFamili",value:function(e,t){this.navCtrl.navigateForward("/"+e+"/"+t.toString())}},{key:"doRefresh",value:function(e){this.load(),e.target.complete()}},{key:"gotoCart",value:function(){this.ifLogin()?this.navCtrl.navigateForward("/login"):this.navCtrl.navigateForward("/cart")}},{key:"filter",value:function(e){var t=this;""==this.search?this.load():this._productsService.filter(e.target.value).subscribe((function(e){console.log(e),t.product=e,console.log(t.product),t.product.forEach((function(e){e.name=decodeURIComponent(e.name)})),t.user&&t._productsService.getFav(t.user[0].id).subscribe((function(e){t.productLike=e,t.productLike.forEach((function(e){e.name=decodeURIComponent(e.name)}))}))}),(function(e){}))}},{key:"addToCart",value:function(e){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(console.log(e),n=!1,r=localStorage.getItem("cart"),console.log(r),r=JSON.parse(r),o=0;o<r.length;o++)r[o].id==e.id&&(r[o].quantity+=e.quantity,n=!0);return n?(localStorage.setItem("cart",JSON.stringify(r)),console.log("yes")):(console.log("no"),this.cart.push(e),localStorage.setItem("cart",JSON.stringify(this.cart))),t.next=7,this.toastController.create({message:"Producto a\xf1adido",duration:2e3,color:"success"});case 7:t.sent.present(),this.navCtrl.navigateForward("/home");case 9:case"end":return t.stop()}}),t,this)})))}},{key:"loadProduct",value:function(e){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,r=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.modalController.create({component:d.a,swipeToClose:!0,componentProps:{product:e}});case 2:return(n=t.sent).onDidDismiss().then((function(e){r.ngOnInit()})),t.next=6,n.present();case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t,this)})))}},{key:"checkFav",value:function(e){for(var t=0;t<this.productLike.length;t++)if(e.id==this.productLike[t].productId)return!0;return!1}},{key:"addFav",value:function(e){this.productLike.push({productId:e.id,userId:this.user[0].id});var t={productId:e.id,userId:this.user[0].id},n=new p.c({"Content-Type":"application/json",Authorization:localStorage.getItem("token")});this.http.post(m.a.APIURL+"/addFavorite/",t,{headers:n}).subscribe((function(e){}),(function(e){console.log(e)}))}},{key:"deleteFav",value:function(e){for(var t=0;t<this.productLike.length;t++)e.id==this.productLike[t].productId&&this.productLike.splice(t,1);this._productsService.deleteFav(e.id,this.user[0].id).subscribe((function(e){}),(function(e){console.log(e)}))}}])&&t(r.prototype,o),i&&t(r,i),n}(),O.\u0275fac=function(e){return new(e||O)(f["\u0275\u0275directiveInject"](u.a),f["\u0275\u0275directiveInject"](c.Q),f["\u0275\u0275directiveInject"](c.O),f["\u0275\u0275directiveInject"](c.b),f["\u0275\u0275directiveInject"](c.X),f["\u0275\u0275directiveInject"](c.P),f["\u0275\u0275directiveInject"](p.a))},O.\u0275cmp=f["\u0275\u0275defineComponent"]({type:O,selectors:[["app-home"]],features:[f["\u0275\u0275ProvidersFeature"]([u.a])],decls:17,vars:6,consts:[[3,"translucent"],["slot","start"],["slot","end",3,"click"],["slot","end","name","person-outline",3,"click",4,"ngIf"],["slot","icon-only","name","cart-outline"],["color","danger",2,"position","absolute","right","-5px","top","-3px"],["slot","fixed",3,"ionRefresh"],["animated","",3,"ngModel","ngModelChange","ionChange"],[4,"ngIf"],["slot","end","name","person-outline",3,"click"],["class","family",3,"click",4,"ngFor","ngForOf"],[1,"family",3,"click"],["src","../../../assets/SALADO.jpg",4,"ngIf"],[3,"src",4,"ngIf"],[1,"card-title"],["src","../../../assets/SALADO.jpg"],[3,"src"],[4,"ngFor","ngForOf"],["class","product","src","../../../assets/mug.jpg",4,"ngIf"],["class","product",3,"src",4,"ngIf"],["size","9"],[1,"center"],[3,"click"],[1,"heart"],["src","../../../assets/mug.jpg",1,"product"],[1,"product",3,"src"],["name","heart-outline",3,"click",4,"ngIf"],["color","danger","name","heart",3,"click",4,"ngIf"],["name","heart-outline",3,"click"],["color","danger","name","heart",3,"click"]],template:function(e,t){1&e&&(f["\u0275\u0275elementStart"](0,"ion-header",0),f["\u0275\u0275elementStart"](1,"ion-toolbar"),f["\u0275\u0275elementStart"](2,"ion-buttons",1),f["\u0275\u0275element"](3,"ion-menu-button"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](4,"ion-title"),f["\u0275\u0275text"](5,"Inicio"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](6,"ion-buttons",2),f["\u0275\u0275listener"]("click",(function(){return t.gotoCart()})),f["\u0275\u0275template"](7,g,1,0,"ion-icon",3),f["\u0275\u0275element"](8,"ion-icon",4),f["\u0275\u0275elementStart"](9,"ion-badge",5),f["\u0275\u0275text"](10),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](11,"ion-content"),f["\u0275\u0275elementStart"](12,"ion-refresher",6),f["\u0275\u0275listener"]("ionRefresh",(function(e){return t.doRefresh(e)})),f["\u0275\u0275element"](13,"ion-refresher-content"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](14,"ion-searchbar",7),f["\u0275\u0275listener"]("ngModelChange",(function(e){return t.search=e}))("ionChange",(function(e){return t.filter(e)})),f["\u0275\u0275elementEnd"](),f["\u0275\u0275template"](15,k,2,1,"div",8),f["\u0275\u0275template"](16,E,2,1,"div",8),f["\u0275\u0275elementEnd"]()),2&e&&(f["\u0275\u0275property"]("translucent",!0),f["\u0275\u0275advance"](7),f["\u0275\u0275property"]("ngIf",t.ifLogin()),f["\u0275\u0275advance"](3),f["\u0275\u0275textInterpolate"](null==t.cart?null:t.cart.length),f["\u0275\u0275advance"](4),f["\u0275\u0275property"]("ngModel",t.search),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",""==t.search),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",""!=t.search))},directives:[c.r,c.L,c.h,c.z,c.K,i.k,c.s,c.f,c.o,c.D,c.E,c.H,c.W,a.d,a.g,i.j,c.i,c.G,c.n,c.m,c.g],pipes:[i.n],styles:[".searchbar-ios[_ngcontent-%COMP%]   .searchbar-input[_ngcontent-%COMP%]{background-color:#fff!important}.card-title[_ngcontent-%COMP%]{position:absolute;top:36%;font-size:2em;width:100%;margin-left:1rem;font-weight:700;color:#fff}ion-icon[_ngcontent-%COMP%]{zoom:1.2}.center[_ngcontent-%COMP%], .heart[_ngcontent-%COMP%]{text-align:center}.heart[_ngcontent-%COMP%]{zoom:2}img[_ngcontent-%COMP%]{border-radius:5%}@media (max-width:800px){.family[_ngcontent-%COMP%]{border-radius:5%;max-height:125px}}.picker[_ngcontent-%COMP%]{margin-top:1rem}.product[_ngcontent-%COMP%]{border-radius:5%;margin-top:3rem}"]}),O)}],L=((P=function t(){e(this,t)}).\u0275mod=f["\u0275\u0275defineNgModule"]({type:P}),P.\u0275inj=f["\u0275\u0275defineInjector"]({factory:function(e){return new(e||P)},imports:[[l.i.forChild(j)],l.i]}),P),M=((F=function t(){e(this,t)}).\u0275mod=f["\u0275\u0275defineNgModule"]({type:F}),F.\u0275inj=f["\u0275\u0275defineInjector"]({factory:function(e){return new(e||F)},imports:[[i.b,a.a,c.M,L]]}),F)}}])}();