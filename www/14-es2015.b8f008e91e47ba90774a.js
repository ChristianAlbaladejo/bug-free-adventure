(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{klDL:function(e,t,n){"use strict";n.r(t),n.d(t,"HomePageModule",(function(){return O}));var o=n("ofXK"),r=n("3Pt+"),i=n("TEn/"),c=n("tyNb"),a=n("mrSG"),l=n("S3Px"),s=n("knE8"),d=n("AytR"),m=n("tk/3"),p=n("fXoL");function u(e,t){if(1&e){const e=p["\u0275\u0275getCurrentView"]();p["\u0275\u0275elementStart"](0,"ion-icon",9),p["\u0275\u0275listener"]("click",(function(){return p["\u0275\u0275restoreView"](e),p["\u0275\u0275nextContext"]().gotoLogin()})),p["\u0275\u0275elementEnd"]()}}function g(e,t){1&e&&p["\u0275\u0275element"](0,"img",15)}function h(e,t){if(1&e&&p["\u0275\u0275element"](0,"img",16),2&e){const e=p["\u0275\u0275nextContext"]().$implicit;p["\u0275\u0275propertyInterpolate"]("src",e.image,p["\u0275\u0275sanitizeUrl"])}}function f(e,t){if(1&e){const e=p["\u0275\u0275getCurrentView"]();p["\u0275\u0275elementStart"](0,"ion-card",11),p["\u0275\u0275listener"]("click",(function(){p["\u0275\u0275restoreView"](e);const n=t.$implicit;return p["\u0275\u0275nextContext"](2).goToFamili(n.name,n.id)})),p["\u0275\u0275template"](1,g,1,0,"img",12),p["\u0275\u0275template"](2,h,1,1,"img",13),p["\u0275\u0275elementStart"](3,"div",14),p["\u0275\u0275text"](4),p["\u0275\u0275pipe"](5,"uppercase"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("ngIf","null"==e.image),p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("ngIf","null"!=e.image),p["\u0275\u0275advance"](2),p["\u0275\u0275textInterpolate"](p["\u0275\u0275pipeBind1"](5,3,e.name))}}function v(e,t){if(1&e&&(p["\u0275\u0275elementStart"](0,"div"),p["\u0275\u0275template"](1,f,6,5,"ion-card",10),p["\u0275\u0275elementEnd"]()),2&e){const e=p["\u0275\u0275nextContext"]();p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("ngForOf",e.familyes)}}function C(e,t){1&e&&p["\u0275\u0275element"](0,"img",24)}function I(e,t){if(1&e&&p["\u0275\u0275element"](0,"img",25),2&e){const e=p["\u0275\u0275nextContext"]().$implicit;p["\u0275\u0275propertyInterpolate"]("src",e.image,p["\u0275\u0275sanitizeUrl"])}}function S(e,t){if(1&e){const e=p["\u0275\u0275getCurrentView"]();p["\u0275\u0275elementStart"](0,"ion-icon",28),p["\u0275\u0275listener"]("click",(function(){p["\u0275\u0275restoreView"](e);const t=p["\u0275\u0275nextContext"](2).$implicit;return p["\u0275\u0275nextContext"](2).addFav(t)})),p["\u0275\u0275elementEnd"]()}}function y(e,t){if(1&e){const e=p["\u0275\u0275getCurrentView"]();p["\u0275\u0275elementStart"](0,"ion-icon",29),p["\u0275\u0275listener"]("click",(function(){p["\u0275\u0275restoreView"](e);const t=p["\u0275\u0275nextContext"](2).$implicit;return p["\u0275\u0275nextContext"](2).deleteFav(t)})),p["\u0275\u0275elementEnd"]()}}function x(e,t){if(1&e&&(p["\u0275\u0275elementStart"](0,"div"),p["\u0275\u0275template"](1,S,1,0,"ion-icon",26),p["\u0275\u0275template"](2,y,1,0,"ion-icon",27),p["\u0275\u0275elementEnd"]()),2&e){const e=p["\u0275\u0275nextContext"]().$implicit,t=p["\u0275\u0275nextContext"](2);p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("ngIf",!t.checkFav(e)),p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("ngIf",t.checkFav(e))}}function k(e,t){if(1&e){const e=p["\u0275\u0275getCurrentView"]();p["\u0275\u0275elementStart"](0,"ion-card"),p["\u0275\u0275elementStart"](1,"ion-row"),p["\u0275\u0275elementStart"](2,"ion-col"),p["\u0275\u0275template"](3,C,1,0,"img",18),p["\u0275\u0275template"](4,I,1,1,"img",19),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](5,"ion-col",20),p["\u0275\u0275elementStart"](6,"h4"),p["\u0275\u0275elementStart"](7,"ion-card-title"),p["\u0275\u0275text"](8),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](9,"ion-row"),p["\u0275\u0275element"](10,"ion-col"),p["\u0275\u0275elementStart"](11,"ion-col",21),p["\u0275\u0275elementStart"](12,"ion-button",22),p["\u0275\u0275listener"]("click",(function(){p["\u0275\u0275restoreView"](e);const n=t.$implicit;return p["\u0275\u0275nextContext"](2).loadProduct(n)})),p["\u0275\u0275text"](13,"Ver mas"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](14,"ion-col",23),p["\u0275\u0275template"](15,x,3,2,"div",8),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=p["\u0275\u0275nextContext"](2);p["\u0275\u0275advance"](3),p["\u0275\u0275property"]("ngIf",!e.image),p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("ngIf",e.image),p["\u0275\u0275advance"](4),p["\u0275\u0275textInterpolate"](e.name),p["\u0275\u0275advance"](7),p["\u0275\u0275property"]("ngIf",n.productLike)}}function b(e,t){if(1&e&&(p["\u0275\u0275elementStart"](0,"div"),p["\u0275\u0275template"](1,k,16,4,"ion-card",17),p["\u0275\u0275elementEnd"]()),2&e){const e=p["\u0275\u0275nextContext"]();p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("ngForOf",e.product)}}const E=[{path:"",component:(()=>{class e{constructor(e,t,n,o,r,i,c){this._productsService=e,this.navCtrl=t,this.loadingController=n,this.alertController=o,this.toastController=r,this.modalController=i,this.http=c,this.cart=[],this.productLike=[],this.search="",this.currentNumber=0}ngOnInit(){this.products(),this.load()}ionViewDidEnter(){this.products()}load(){return Object(a.a)(this,void 0,void 0,(function*(){const e=yield this.loadingController.create({message:"Cargando...",translucent:!0});yield e.present(),this._productsService.getFamilies().subscribe(e=>{console.log(e),this.familyes=e,this.loadingController.dismiss()},e=>Object(a.a)(this,void 0,void 0,(function*(){const e=yield this.alertController.create({header:"Error!",message:"Parece que tenemos problemas \u{1f974}",buttons:[{text:"Okay",handler:()=>{this.load()}}]});yield e.present(),this.loadingController.dismiss()})))}))}products(){localStorage.getItem("cart")||localStorage.setItem("cart",JSON.stringify({})),this.user=localStorage.getItem("identity"),this.user=JSON.parse(this.user);let e=localStorage.getItem("cart");e=JSON.parse(e),this.cart=[];for(let t=0;t<e.length;t++)this.cart.push(e[t])}ifLogin(){return null==JSON.parse(localStorage.getItem("identity"))}gotoLogin(){this.navCtrl.navigateForward("/login")}goToFamili(e,t){this.navCtrl.navigateForward("/"+e+"/"+t.toString())}doRefresh(e){this.load(),e.target.complete()}gotoCart(){this.ifLogin()?this.navCtrl.navigateForward("/login"):this.navCtrl.navigateForward("/cart")}filter(e){""==this.search?this.load():this._productsService.filter(e.target.value).subscribe(e=>{console.log(e),this.product=e,console.log(this.product),this.product.forEach(e=>{e.name=decodeURIComponent(e.name)}),this.user&&this._productsService.getFav(this.user[0].id).subscribe(e=>{this.productLike=e,this.productLike.forEach(e=>{e.name=decodeURIComponent(e.name)})})},e=>{})}addToCart(e){return Object(a.a)(this,void 0,void 0,(function*(){console.log(e);let t=!1,n=localStorage.getItem("cart");console.log(n),n=JSON.parse(n);for(let o=0;o<n.length;o++)n[o].id==e.id&&(n[o].quantity+=e.quantity,t=!0);t?(localStorage.setItem("cart",JSON.stringify(n)),console.log("yes")):(console.log("no"),this.cart.push(e),localStorage.setItem("cart",JSON.stringify(this.cart))),(yield this.toastController.create({message:"Producto a\xf1adido",duration:2e3,color:"success"})).present(),this.navCtrl.navigateForward("/home")}))}loadProduct(e){return Object(a.a)(this,void 0,void 0,(function*(){const t=yield this.modalController.create({component:s.a,swipeToClose:!0,componentProps:{product:e}});return t.onDidDismiss().then(e=>{this.ngOnInit()}),yield t.present()}))}checkFav(e){for(let t=0;t<this.productLike.length;t++)if(e.id==this.productLike[t].productId)return!0;return!1}addFav(e){this.productLike.push({productId:e.id,userId:this.user[0].id});var t={productId:e.id,userId:this.user[0].id};let n=new m.c({"Content-Type":"application/json",Authorization:localStorage.getItem("token")});this.http.post(d.a.APIURL+"/addFavorite/",t,{headers:n}).subscribe(e=>{},e=>{console.log(e)})}deleteFav(e){for(let t=0;t<this.productLike.length;t++)e.id==this.productLike[t].productId&&this.productLike.splice(t,1);this._productsService.deleteFav(e.id,this.user[0].id).subscribe(e=>{},e=>{console.log(e)})}}return e.\u0275fac=function(t){return new(t||e)(p["\u0275\u0275directiveInject"](l.a),p["\u0275\u0275directiveInject"](i.Q),p["\u0275\u0275directiveInject"](i.O),p["\u0275\u0275directiveInject"](i.b),p["\u0275\u0275directiveInject"](i.X),p["\u0275\u0275directiveInject"](i.P),p["\u0275\u0275directiveInject"](m.a))},e.\u0275cmp=p["\u0275\u0275defineComponent"]({type:e,selectors:[["app-home"]],features:[p["\u0275\u0275ProvidersFeature"]([l.a])],decls:17,vars:6,consts:[[3,"translucent"],["slot","start"],["slot","end",3,"click"],["slot","end","name","person-outline",3,"click",4,"ngIf"],["slot","icon-only","name","cart-outline"],["color","danger",2,"position","absolute","right","-5px","top","-3px"],["slot","fixed",3,"ionRefresh"],["animated","",3,"ngModel","ngModelChange","ionChange"],[4,"ngIf"],["slot","end","name","person-outline",3,"click"],["class","family",3,"click",4,"ngFor","ngForOf"],[1,"family",3,"click"],["src","../../../assets/SALADO.jpg",4,"ngIf"],[3,"src",4,"ngIf"],[1,"card-title"],["src","../../../assets/SALADO.jpg"],[3,"src"],[4,"ngFor","ngForOf"],["class","product","src","../../../assets/mug.jpg",4,"ngIf"],["class","product",3,"src",4,"ngIf"],["size","9"],[1,"center"],[3,"click"],[1,"heart"],["src","../../../assets/mug.jpg",1,"product"],[1,"product",3,"src"],["name","heart-outline",3,"click",4,"ngIf"],["color","danger","name","heart",3,"click",4,"ngIf"],["name","heart-outline",3,"click"],["color","danger","name","heart",3,"click"]],template:function(e,t){1&e&&(p["\u0275\u0275elementStart"](0,"ion-header",0),p["\u0275\u0275elementStart"](1,"ion-toolbar"),p["\u0275\u0275elementStart"](2,"ion-buttons",1),p["\u0275\u0275element"](3,"ion-menu-button"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](4,"ion-title"),p["\u0275\u0275text"](5,"Inicio"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](6,"ion-buttons",2),p["\u0275\u0275listener"]("click",(function(){return t.gotoCart()})),p["\u0275\u0275template"](7,u,1,0,"ion-icon",3),p["\u0275\u0275element"](8,"ion-icon",4),p["\u0275\u0275elementStart"](9,"ion-badge",5),p["\u0275\u0275text"](10),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](11,"ion-content"),p["\u0275\u0275elementStart"](12,"ion-refresher",6),p["\u0275\u0275listener"]("ionRefresh",(function(e){return t.doRefresh(e)})),p["\u0275\u0275element"](13,"ion-refresher-content"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](14,"ion-searchbar",7),p["\u0275\u0275listener"]("ngModelChange",(function(e){return t.search=e}))("ionChange",(function(e){return t.filter(e)})),p["\u0275\u0275elementEnd"](),p["\u0275\u0275template"](15,v,2,1,"div",8),p["\u0275\u0275template"](16,b,2,1,"div",8),p["\u0275\u0275elementEnd"]()),2&e&&(p["\u0275\u0275property"]("translucent",!0),p["\u0275\u0275advance"](7),p["\u0275\u0275property"]("ngIf",t.ifLogin()),p["\u0275\u0275advance"](3),p["\u0275\u0275textInterpolate"](null==t.cart?null:t.cart.length),p["\u0275\u0275advance"](4),p["\u0275\u0275property"]("ngModel",t.search),p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("ngIf",""==t.search),p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("ngIf",""!=t.search))},directives:[i.r,i.L,i.h,i.z,i.K,o.k,i.s,i.f,i.o,i.D,i.E,i.H,i.W,r.d,r.g,o.j,i.i,i.G,i.n,i.m,i.g],pipes:[o.n],styles:[".searchbar-ios[_ngcontent-%COMP%]   .searchbar-input[_ngcontent-%COMP%]{background-color:#fff!important}.card-title[_ngcontent-%COMP%]{position:absolute;top:36%;font-size:2em;width:100%;margin-left:1rem;font-weight:700;color:#fff}ion-icon[_ngcontent-%COMP%]{zoom:1.2}.center[_ngcontent-%COMP%], .heart[_ngcontent-%COMP%]{text-align:center}.heart[_ngcontent-%COMP%]{zoom:2}img[_ngcontent-%COMP%]{border-radius:5%}@media (max-width:800px){.family[_ngcontent-%COMP%]{border-radius:5%;max-height:125px}}.picker[_ngcontent-%COMP%]{margin-top:1rem}.product[_ngcontent-%COMP%]{border-radius:5%;margin-top:3rem}"]}),e})()}];let w=(()=>{class e{}return e.\u0275mod=p["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=p["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[c.i.forChild(E)],c.i]}),e})(),O=(()=>{class e{}return e.\u0275mod=p["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=p["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[o.b,r.a,i.M,w]]}),e})()}}]);